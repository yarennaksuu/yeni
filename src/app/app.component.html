<!-- src/app/app.component.html -->
<div class="process-manager">
  <!-- Header -->
  <header class="header">
    <h1>Process Manager</h1>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="openAddModal()" [disabled]="isLoading">
        <i class="icon">+</i> Add Process
      </button>
      <button class="btn btn-secondary" (click)="refreshProcesses()" [disabled]="isLoading">
        <i class="icon">↻</i> Refresh
      </button>
    </div>
  </header>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
    <button class="close-btn" (click)="errorMessage = ''">×</button>
  </div>

  <!-- Search Bar -->
  <div class="search-container">
    <input 
      type="text" 
      class="search-input" 
      placeholder="Search processes by name, PID, or path..."
      [value]="searchTerm"
      (input)="onSearchChange($event)"
    />
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Process List -->
    <div class="process-list">
      <div class="list-header">
        <h2>Processes ({{ filteredProcesses.length }})</h2>
      </div>
      
      <div class="loading" *ngIf="isLoading">Loading processes...</div>
      
      <div class="process-table" *ngIf="!isLoading">
        <div class="table-header">
          <div class="col-name">Name</div>
          <div class="col-pid">PID</div>
          <div class="col-memory">Memory</div>
          <div class="col-status">Status</div>
        </div>
        
        <div 
          class="table-row"
          *ngFor="let process of filteredProcesses"
          [class.selected]="selectedProcess && selectedProcess.pid === process.pid"
          (click)="selectProcess(process)"
        >
          <div class="col-name" [title]="process.executable_path || process.name">
            {{ process.name }}
          </div>
          <div class="col-pid">{{ process.pid }}</div>
          <div class="col-memory">{{ formatMemoryUsage(process.memory_usage) }}</div>
          <div class="col-status">
            <span class="status-badge" [class]="process.status.toLowerCase()">
              {{ process.status }}
            </span>
          </div>
        </div>
        
        <div *ngIf="filteredProcesses.length === 0 && !isLoading" class="no-results">
          No processes found matching "{{ searchTerm }}"
        </div>
      </div>
    </div>

    <!-- Process Details -->
    <div class="process-details" *ngIf="selectedProcess">
      <div class="details-header">
        <h2>Process Details</h2>
        <button 
          class="btn btn-danger" 
          (click)="killSelectedProcess()"
          [disabled]="isLoading"
        >
          Kill Process
        </button>
      </div>
      
      <div class="details-content">
        <div class="detail-group">
          <h3>Basic Information</h3>
          <div class="detail-item">
            <label>Name:</label>
            <span>{{ selectedProcess.name }}</span>
          </div>
          <div class="detail-item">
            <label>PID:</label>
            <span>{{ selectedProcess.pid }}</span>
          </div>
          <div class="detail-item">
            <label>Parent PID:</label>
            <span>{{ selectedProcess.parent_pid }}</span>
          </div>
          <div class="detail-item">
            <label>Memory Usage:</label>
            <span>{{ formatMemoryUsage(selectedProcess.memory_usage) }}</span>
          </div>
          <div class="detail-item" *ngIf="selectedProcess.executable_path">
            <label>Path:</label>
            <span class="path">{{ selectedProcess.executable_path }}</span>
          </div>
        </div>

        <div class="detail-group" *ngIf="processDetails">
          <h3>Extended Information</h3>
          <div class="detail-item">
            <label>Thread Count:</label>
            <span>{{ processDetails.threads_count }}</span>
          </div>
          <div class="detail-item">
            <label>Handle Count:</label>
            <span>{{ processDetails.handles_count }}</span>
          </div>
          <div class="detail-item" *ngIf="processDetails.command_line">
            <label>Command Line:</label>
            <span class="command-line">{{ processDetails.command_line }}</span>
          </div>
          <div class="detail-item" *ngIf="processDetails.working_directory">
            <label>Working Directory:</label>
            <span class="path">{{ processDetails.working_directory }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!selectedProcess && !isLoading">
      <h3>Select a Process</h3>
      <p>Choose a process from the list to view its details</p>
    </div>
  </div>
</div>

<!-- Add Process Modal -->
<div class="modal-overlay" *ngIf="showAddModal" (click)="closeAddModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Add New Process</h2>
      <button class="close-btn" (click)="closeAddModal()">×</button>
    </div>
    
    <div class="modal-content">
      <div class="form-group">
        <label for="executablePath">Executable Path *</label>
        <div class="input-group">
          <input 
            type="text" 
            id="executablePath"
            [(ngModel)]="newProcessPath"
            placeholder="C:\path\to\executable.exe"
            class="form-input"
          />
          <button class="btn btn-secondary" (click)="selectExecutableFile()">
            Browse
          </button>
        </div>
      </div>
      
      <div class="form-group">
        <label for="arguments">Arguments (Optional)</label>
        <input 
          type="text" 
          id="arguments"
          [(ngModel)]="newProcessArgs"
          placeholder="--flag value --another-flag"
          class="form-input"
        />
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="closeAddModal()" [disabled]="isLoading">
        Cancel
      </button>
      <button class="btn btn-primary" (click)="addNewProcess()" [disabled]="isLoading || !newProcessPath.trim()">
        <span *ngIf="isLoading">Starting...</span>
        <span *ngIf="!isLoading">Start Process</span>
      </button>
    </div>
  </div>
</div>